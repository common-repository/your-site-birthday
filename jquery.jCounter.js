(function(e,t,n,r){e.fn.jCounter=function(t,i){function C(t){if(E){if(p){if(!isNaN(p)){h=Math.round(p)}}else{h=Math.round(e(t).data("userOptions").customDuration)}n=0;O(n,t);e(t).data("jC_interval",setInterval(function(){if(c==false){n=parseInt(n)+1;O(n,t)}},1e3))}else if(N){h=Math.round(S[1]);if(p){if(!isNaN(p)){var n=h-p}}else{var n=Math.round(S[0])}O(n,t);e(t).data("jC_interval",setInterval(function(){if(c==false){var e=o?n=parseInt(n)-1:n=parseInt(n)+1;O(n,t)}},1e3))}else{h=Date.parse(e(t).data("userOptions").date)/1e3;dateSource=d.data("userOptions").serverDateSource+"?timezone="+d.data("userOptions").timezone+"&callback=?";e.ajax({url:dateSource,dataType:"json",data:{},success:function(e,n){var r=Date.parse(e.currentDate)/1e3;k(r,t)},error:function(){if(b){console.log("(jC) Error: Couldn't find dateandtime.php from serverDateSource: "+d.data("userOptions").serverDateSource+"\n(jC) - Make sure the path is correct! \n(jC) - Now using the client-side time (not recommended).")}var n=Math.floor(e.now()/1e3);k(n,t)}})}}function k(t,n){O(t,n);if(h>t){e(n).data("jC_interval",setInterval(function(){if(c==false){t=parseInt(t)+1;O(t,n)}},1e3))}else{A(n)}}function L(t,n,r,i,o){e(t).find(n+" u").each(function(t,n){var i=d.data("userOptions").twoDigits=="on"?"0":"";var o=s=="up"?o=-t:o=t;currNo=parseInt(r,10)+o;if(String(parseInt(r,10)).length>=2){e(n).text(parseInt(r,10)+o)}else if(String(parseInt(r,10)).length==1&&currNo==10){e(n).text(parseInt(r,10)+o)}else{e(n).text(i+(parseInt(r,10)+o))}});e(t).find(n).animate({top:"0.15em"},200,function(){e(t).find(n+" u:eq(1)").remove();e(t).find(n).prepend("<u></u>");e(t).find(n).css({top:"-1.24em"})})}function A(t){if(d.data("userOptions").twoDigits=="on"){e(t).find(".days,.hours,.minutes,.seconds").text("00")}else if(d.data("userOptions").twoDigits=="off"){e(t).find(".days,.hours,.minutes,.seconds").text("0")}if(d.data("jCanimation")=="slide"){e(t).find(".daysSlider u,.hoursSlider u,.minutesSlider u,.secondsSlider u").text("00")}}function O(t,n){if(o){if(h>=t){clearInterval(e(n).data("jC_interval"));if(d.data("userOptions").callback){d.data("userOptions").callback.call(this)}}}else{if(h<=t){clearInterval(e(n).data("jC_interval"));if(d.data("userOptions").callback){d.data("userOptions").callback.call(this)}}}var r=N?t:h-t;var i=d.data("userOptions").format;if(i.indexOf("dd")!=-1){var s=Math.floor(r/(60*60*24));r-=s*60*60*24}if(i.indexOf("hh")!=-1){var u=Math.floor(r/(60*60));r-=u*60*60}if(i.indexOf("mm")!=-1){var a=Math.floor(r/60);r-=a*60}if(i.indexOf("ss")==-1){r-=r}if(s==1){e(n).find(".textDays").text(g[0])}else{e(n).find(".textDays").text(m[0])}if(u==1){e(n).find(".textHours").text(g[1])}else{e(n).find(".textHours").text(m[1])}if(a==1){e(n).find(".textMinutes").text(g[2])}else{e(n).find(".textMinutes").text(m[2])}if(r==1){e(n).find(".textSeconds").text(g[3])}else{e(n).find(".textSeconds").text(m[3])}if(d.data("userOptions").twoDigits=="on"){s=String(s).length>=2?s:"0"+s;u=String(u).length>=2?u:"0"+u;a=String(a).length>=2?a:"0"+a;r=String(r).length>=2?r:"0"+r}if(!isNaN(h)){e(n).find(".days").text(s);e(n).find(".hours").text(u);e(n).find(".minutes").text(a);e(n).find(".seconds").text(r);if(d.data("jCanimation")=="slide"){e(n).find(".daysSlider u:eq(1)").text(s);e(n).find(".hoursSlider u:eq(1)").text(u);e(n).find(".minutesSlider u:eq(1)").text(a);e(n).find(".secondsSlider u:eq(1)").text(r);L(n,".secondsSlider",r,h,t);if(parseInt(r,10)==59){L(n,".minutesSlider",a,h,t);if(parseInt(a,10)==59){L(n,".hoursSlider",u,h,t);if(parseInt(u,10)==23){L(n,".daysSlider",s,h,t)}}}}}else{if(b){console.log("(jC) Error: Invalid date! Here's an example: 01 January 1970 12:00:00")}clearInterval(e(n).data("jC_interval"))}e(n).data("jC_pausedTime",h-t)}var s="down";var o;var u,a,f,l;var c=false;var h;var p;var d=this;var v=this.length;var m=new Array("DAYS","HOURS","MINUTES","SECONDS");var g=new Array("DAY","HOUR","MINUTE","SECOND");this.options=t;this.version="0.1.4";var y={animation:null,callback:null,customDuration:null,customRange:null,date:null,debugLog:false,serverDateSource:"dateandtime.php",format:"dd:hh:mm:ss",timezone:"Asia/Tehran",twoDigits:"on"};if(typeof t==="object"){e.extend(y,t);d.data("userOptions",y)}if(d.data("userOptions").debugLog==true&&n["console"]!==r){var b=true}var w={init:function(){d.each(function(e,t){C(t)})},pause:function(){if(b){console.log("(jC) Activity: Counter paused.")}c=true;return d.each(function(t,n){clearInterval(e(n).data("jC_interval"))})},stop:function(){if(b){console.log("(jC) Activity: Counter stopped.")}c=true;return d.each(function(t,n){clearInterval(e(n).data("jC_interval"));e(n).removeData("jC_pausedTime");A(n)})},reset:function(){if(b){console.log("(jC) Activity: Counter reset.")}return d.each(function(t,n){clearInterval(e(n).data("jC_interval"));A(n);C(n)})},start:function(){if(b){console.log("(jC) Activity: Counter started.")}return d.each(function(t,n){p=e(n).data("jC_pausedTime");c=false;clearInterval(e(n).data("jC_interval"));C(n)})}};if(d.data("userOptions").customDuration){if(!isNaN(d.data("userOptions").customDuration)){var E=true}else{var E=false;if(b){console.log("(jC) Error: The customDuration value is not a number! NOTE: 'customDuration' accepts a number of seconds.")}}}if(d.data("userOptions").customRange){var S=d.data("userOptions").customRange.split(":");var x=parseInt(S[0]);var T=parseInt(S[1]);if(!isNaN(x)&&!isNaN(T)){var N=true;if(x>T){var o=true}else{var o=false;s="up"}}else{var N=false;if(b){console.log("(jC) Error: The customRange value is not a valid range! Example: customRange: '0:30' or '30:0'")}}}if(d.data("userOptions").animation=="slide"){d.data("jCanimation","slide")}if(w[this.options]){return w[this.options].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof this.options==="object"||!this.options){return w.init.apply(this,arguments)}else{console.log("(jC) Error: Method >>> "+this.options+" <<< does not exist.")}}})(jQuery,document,window)